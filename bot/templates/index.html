<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="toert">
    <script type="text/javascript" src="/static/admin/js/core.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/forms.css"/>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/base.css"/>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/global.css"/>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/widgets.css"/>



<link rel="icon" href="../../favicon.ico">

    <title>Панель управления</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->

    <!-- Custom styles for this template -->

        

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
      .fixed_width {
        width: 100%; 
        min-width: 60px; !important
      }

      tbody {
        font-size: xx-small;
      }
      .table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th {
    padding: 2px;
    border: 1px solid;
  }
      .green {
        background-color: #ADFF6F;
      }
      .gray {
        background-color: #DDDDDD;
      }
      .red {
        background-color: #FFDDDD;
      }
    </style>
  </head>

  <body>
      
      <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <ul class="nav navbar-nav">
          <li class="active"><a href="/">Панель управления</a></li>
          <li><a href="/ad">Создать бота</a></li>
          <li><a href="/set_hmac">Установить HMAC-ключ</a></li>
          <li><a href="/logout">Выйти</a></li>
        </ul>
      </div>
    </nav>
    <div class="table-responsive">

      <table class="table" id="MyTable">
        <tr>
          <th>ID</th>
          <th>Напр</th> 
          <th>Инстр</th> 
          <th>Вал</th>
          <th>min ц</th> 
          <th>max ц</th>
          <th>Тек поз</th> 
          <th>Курс</th> 
          <th>Обьем</th> 
          <th>Шаг</th> 
          <th>max V</th> 
          <th>lim ц</th> 
          <th>lim V</th> 
          <th>Шаг б</th> 
          <th>Активн</th>
          <th>Сохр</th> 
        </tr>
        {% for ad in ads %}
        <tr {% if ad.is_updated %}class="gray"
            {% elif ad.direction == 'sell' %}class="green"
            {% elif ad.direction == 'buy' %}class="red"{% endif %}>
        <form action="/edit/{{ad.id}}" method="post">
          {% csrf_token %}
          <td>{{ ad.id }}</td>
          <td>{{ ad.direction }}</td> 
          <td>{{ ad.online_provider }}</td>
          <td>{{ ad.currency }}</td>
          <td><input type="number" class="fixed_width" name="min_price" value="{{ ad.min_price }}"  step="0.01" required=""></td> 
          <td><input type="number" class="fixed_width" name="max_price" value="{{ ad.max_price }}"  step="0.01" required=""></td>
          <td>{{ ad.current_ad_position }}</td>
          <td>{{ ad.price_equation }}</td> 
          <td>{{ ad.current_amount }}</td>
          <td><input type="number" class="fixed_width" name="step" value="{{ ad.step }}"  required=""></td>
          <td><input type="number"  class="fixed_width" name="max_amount" value="{{ ad.max_amount }}"  required=""></td> 
          <td><input type="number"  class="fixed_width" name="price_limit" value="{{ ad.price_limit }}" step="0.01" required=""></td>
          <td><input type="number"  class="fixed_width" name="amount_limit" value="{{ ad.amount_limit }}" required=""></td>
          <td>{{ ad.current_step }}</td> 
          <td><input type="checkbox"  class="fixed_width" name="is_updated"  {% if ad.is_updated %}checked=""{% endif %}></td>
          <td><input type="submit" value="√"  class="text-center btn btn-success"/>
          <a href="ad/{{ ad.id }}" class="btn btn-warning" role="button">&#9998;</a> </td> 
          </form>
        </tr>
        {% endfor %}
      </table>
      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
      </div>
        

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script type="text/javascript">

    $( document ).ready(function() {
       setInterval(function(){
           $.ajax({
               url:'/table/' ,
               type: "get",
               cache: true,
               timeout: 30000,
               dataType: 'html',
               success: function(data) {
                   var foo = document.getElementById('MyTable')

                   $('#MyTable').html(data);
               },
               error: function(data) {
                   alert("Got an error dude "+data);
               }
           });
       }, 10000);
    });

 </script>
    <script>
      $(function() {
        $( ".datepicker" ).datepicker({
          changeMonth: true,
          changeYear: true,
          yearRange: "2010:2017",
          // You can put more options here.

        });
      });
    </script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  </body>
</html>

